{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"C:/myCodes/KredoCodeChallenge/react/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _classCallCheck = require(\"C:/myCodes/KredoCodeChallenge/react/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"C:/myCodes/KredoCodeChallenge/react/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _require = require(\"tapable\"),\n  SyncWaterfallHook = _require.SyncWaterfallHook;\nvar Template = require(\"../Template\");\nvar JsonpMainTemplatePlugin = /*#__PURE__*/function () {\n  function JsonpMainTemplatePlugin() {\n    _classCallCheck(this, JsonpMainTemplatePlugin);\n  }\n  _createClass(JsonpMainTemplatePlugin, [{\n    key: \"apply\",\n    value: function apply(mainTemplate) {\n      var needChunkOnDemandLoadingCode = function needChunkOnDemandLoadingCode(chunk) {\n        var _iterator = _createForOfIteratorHelper(chunk.groupsIterable),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var chunkGroup = _step.value;\n            if (chunkGroup.getNumberOfChildren() > 0) return true;\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        return false;\n      };\n      var needChunkLoadingCode = function needChunkLoadingCode(chunk) {\n        var _iterator2 = _createForOfIteratorHelper(chunk.groupsIterable),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var chunkGroup = _step2.value;\n            if (chunkGroup.chunks.length > 1) return true;\n            if (chunkGroup.getNumberOfChildren() > 0) return true;\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        return false;\n      };\n      var needEntryDeferringCode = function needEntryDeferringCode(chunk) {\n        var _iterator3 = _createForOfIteratorHelper(chunk.groupsIterable),\n          _step3;\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var chunkGroup = _step3.value;\n            if (chunkGroup.chunks.length > 1) return true;\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n        return false;\n      };\n      var needPrefetchingCode = function needPrefetchingCode(chunk) {\n        var allPrefetchChunks = chunk.getChildIdsByOrdersMap(true).prefetch;\n        return allPrefetchChunks && Object.keys(allPrefetchChunks).length;\n      };\n\n      // TODO webpack 5, no adding to .hooks, use WeakMap and static methods\n      [\"jsonpScript\", \"linkPreload\", \"linkPrefetch\"].forEach(function (hook) {\n        if (!mainTemplate.hooks[hook]) {\n          mainTemplate.hooks[hook] = new SyncWaterfallHook([\"source\", \"chunk\", \"hash\"]);\n        }\n      });\n      var getScriptSrcPath = function getScriptSrcPath(hash, chunk, chunkIdExpression) {\n        var chunkFilename = mainTemplate.outputOptions.chunkFilename;\n        var chunkMaps = chunk.getChunkMaps();\n        return mainTemplate.getAssetPath(JSON.stringify(chunkFilename), {\n          hash: \"\\\" + \".concat(mainTemplate.renderCurrentHashCode(hash), \" + \\\"\"),\n          hashWithLength: function hashWithLength(length) {\n            return \"\\\" + \".concat(mainTemplate.renderCurrentHashCode(hash, length), \" + \\\"\");\n          },\n          chunk: {\n            id: \"\\\" + \".concat(chunkIdExpression, \" + \\\"\"),\n            hash: \"\\\" + \".concat(JSON.stringify(chunkMaps.hash), \"[\").concat(chunkIdExpression, \"] + \\\"\"),\n            hashWithLength: function hashWithLength(length) {\n              var shortChunkHashMap = Object.create(null);\n              for (var _i = 0, _Object$keys = Object.keys(chunkMaps.hash); _i < _Object$keys.length; _i++) {\n                var chunkId = _Object$keys[_i];\n                if (typeof chunkMaps.hash[chunkId] === \"string\") {\n                  shortChunkHashMap[chunkId] = chunkMaps.hash[chunkId].substr(0, length);\n                }\n              }\n              return \"\\\" + \".concat(JSON.stringify(shortChunkHashMap), \"[\").concat(chunkIdExpression, \"] + \\\"\");\n            },\n            name: \"\\\" + (\".concat(JSON.stringify(chunkMaps.name), \"[\").concat(chunkIdExpression, \"]||\").concat(chunkIdExpression, \") + \\\"\"),\n            contentHash: {\n              javascript: \"\\\" + \".concat(JSON.stringify(chunkMaps.contentHash.javascript), \"[\").concat(chunkIdExpression, \"] + \\\"\")\n            },\n            contentHashWithLength: {\n              javascript: function javascript(length) {\n                var shortContentHashMap = {};\n                var contentHash = chunkMaps.contentHash.javascript;\n                for (var _i2 = 0, _Object$keys2 = Object.keys(contentHash); _i2 < _Object$keys2.length; _i2++) {\n                  var chunkId = _Object$keys2[_i2];\n                  if (typeof contentHash[chunkId] === \"string\") {\n                    shortContentHashMap[chunkId] = contentHash[chunkId].substr(0, length);\n                  }\n                }\n                return \"\\\" + \".concat(JSON.stringify(shortContentHashMap), \"[\").concat(chunkIdExpression, \"] + \\\"\");\n              }\n            }\n          },\n          contentHashType: \"javascript\"\n        });\n      };\n      mainTemplate.hooks.localVars.tap(\"JsonpMainTemplatePlugin\", function (source, chunk, hash) {\n        var extraCode = [];\n        if (needChunkLoadingCode(chunk)) {\n          extraCode.push(\"\", \"// object to store loaded and loading chunks\", \"// undefined = chunk not loaded, null = chunk preloaded/prefetched\", \"// Promise = chunk loading, 0 = chunk loaded\", \"var installedChunks = {\", Template.indent(chunk.ids.map(function (id) {\n            return \"\".concat(JSON.stringify(id), \": 0\");\n          }).join(\",\\n\")), \"};\", \"\", needEntryDeferringCode(chunk) ? needPrefetchingCode(chunk) ? \"var deferredModules = [], deferredPrefetch = [];\" : \"var deferredModules = [];\" : \"\");\n        }\n        if (needChunkOnDemandLoadingCode(chunk)) {\n          extraCode.push(\"\", \"// script path function\", \"function jsonpScriptSrc(chunkId) {\", Template.indent([\"return \".concat(mainTemplate.requireFn, \".p + \").concat(getScriptSrcPath(hash, chunk, \"chunkId\"))]), \"}\");\n        }\n        if (extraCode.length === 0) return source;\n        return Template.asString([source].concat(extraCode));\n      });\n      mainTemplate.hooks.jsonpScript.tap(\"JsonpMainTemplatePlugin\", function (_, chunk, hash) {\n        var crossOriginLoading = mainTemplate.outputOptions.crossOriginLoading;\n        var chunkLoadTimeout = mainTemplate.outputOptions.chunkLoadTimeout;\n        var jsonpScriptType = mainTemplate.outputOptions.jsonpScriptType;\n        return Template.asString([\"var script = document.createElement('script');\", \"var onScriptComplete;\", jsonpScriptType ? \"script.type = \".concat(JSON.stringify(jsonpScriptType), \";\") : \"\", \"script.charset = 'utf-8';\", \"script.timeout = \".concat(chunkLoadTimeout / 1000, \";\"), \"if (\".concat(mainTemplate.requireFn, \".nc) {\"), Template.indent(\"script.setAttribute(\\\"nonce\\\", \".concat(mainTemplate.requireFn, \".nc);\")), \"}\", \"script.src = jsonpScriptSrc(chunkId);\", crossOriginLoading ? Template.asString([\"if (script.src.indexOf(window.location.origin + '/') !== 0) {\", Template.indent(\"script.crossOrigin = \".concat(JSON.stringify(crossOriginLoading), \";\")), \"}\"]) : \"\", \"// create error before stack unwound to get useful stacktrace later\", \"var error = new Error();\", \"onScriptComplete = function (event) {\", Template.indent([\"// avoid mem leaks in IE.\", \"script.onerror = script.onload = null;\", \"clearTimeout(timeout);\", \"var chunk = installedChunks[chunkId];\", \"if(chunk !== 0) {\", Template.indent([\"if(chunk) {\", Template.indent([\"var errorType = event && (event.type === 'load' ? 'missing' : event.type);\", \"var realSrc = event && event.target && event.target.src;\", \"error.message = 'Loading chunk ' + chunkId + ' failed.\\\\n(' + errorType + ': ' + realSrc + ')';\", \"error.name = 'ChunkLoadError';\", \"error.type = errorType;\", \"error.request = realSrc;\", \"chunk[1](error);\"]), \"}\", \"installedChunks[chunkId] = undefined;\"]), \"}\"]), \"};\", \"var timeout = setTimeout(function(){\", Template.indent([\"onScriptComplete({ type: 'timeout', target: script });\"]), \"}, \".concat(chunkLoadTimeout, \");\"), \"script.onerror = script.onload = onScriptComplete;\"]);\n      });\n      mainTemplate.hooks.linkPreload.tap(\"JsonpMainTemplatePlugin\", function (_, chunk, hash) {\n        var crossOriginLoading = mainTemplate.outputOptions.crossOriginLoading;\n        var jsonpScriptType = mainTemplate.outputOptions.jsonpScriptType;\n        return Template.asString([\"var link = document.createElement('link');\", jsonpScriptType ? \"link.type = \".concat(JSON.stringify(jsonpScriptType), \";\") : \"\", \"link.charset = 'utf-8';\", \"if (\".concat(mainTemplate.requireFn, \".nc) {\"), Template.indent(\"link.setAttribute(\\\"nonce\\\", \".concat(mainTemplate.requireFn, \".nc);\")), \"}\", 'link.rel = \"preload\";', 'link.as = \"script\";', \"link.href = jsonpScriptSrc(chunkId);\", crossOriginLoading ? Template.asString([\"if (link.href.indexOf(window.location.origin + '/') !== 0) {\", Template.indent(\"link.crossOrigin = \".concat(JSON.stringify(crossOriginLoading), \";\")), \"}\"]) : \"\"]);\n      });\n      mainTemplate.hooks.linkPrefetch.tap(\"JsonpMainTemplatePlugin\", function (_, chunk, hash) {\n        var crossOriginLoading = mainTemplate.outputOptions.crossOriginLoading;\n        return Template.asString([\"var link = document.createElement('link');\", crossOriginLoading ? \"link.crossOrigin = \".concat(JSON.stringify(crossOriginLoading), \";\") : \"\", \"if (\".concat(mainTemplate.requireFn, \".nc) {\"), Template.indent(\"link.setAttribute(\\\"nonce\\\", \".concat(mainTemplate.requireFn, \".nc);\")), \"}\", 'link.rel = \"prefetch\";', 'link.as = \"script\";', \"link.href = jsonpScriptSrc(chunkId);\"]);\n      });\n      mainTemplate.hooks.requireEnsure.tap(\"JsonpMainTemplatePlugin load\", function (source, chunk, hash) {\n        return Template.asString([source, \"\", \"// JSONP chunk loading for javascript\", \"\", \"var installedChunkData = installedChunks[chunkId];\", 'if(installedChunkData !== 0) { // 0 means \"already installed\".', Template.indent([\"\", '// a Promise means \"currently loading\".', \"if(installedChunkData) {\", Template.indent([\"promises.push(installedChunkData[2]);\"]), \"} else {\", Template.indent([\"// setup Promise in chunk cache\", \"var promise = new Promise(function(resolve, reject) {\", Template.indent([\"installedChunkData = installedChunks[chunkId] = [resolve, reject];\"]), \"});\", \"promises.push(installedChunkData[2] = promise);\", \"\", \"// start chunk loading\", mainTemplate.hooks.jsonpScript.call(\"\", chunk, hash), \"document.head.appendChild(script);\"]), \"}\"]), \"}\"]);\n      });\n      mainTemplate.hooks.requireEnsure.tap({\n        name: \"JsonpMainTemplatePlugin preload\",\n        stage: 10\n      }, function (source, chunk, hash) {\n        var chunkMap = chunk.getChildIdsByOrdersMap().preload;\n        if (!chunkMap || Object.keys(chunkMap).length === 0) return source;\n        return Template.asString([source, \"\", \"// chunk preloadng for javascript\", \"\", \"var chunkPreloadMap = \".concat(JSON.stringify(chunkMap, null, \"\\t\"), \";\"), \"\", \"var chunkPreloadData = chunkPreloadMap[chunkId];\", \"if(chunkPreloadData) {\", Template.indent([\"chunkPreloadData.forEach(function(chunkId) {\", Template.indent([\"if(installedChunks[chunkId] === undefined) {\", Template.indent([\"installedChunks[chunkId] = null;\", mainTemplate.hooks.linkPreload.call(\"\", chunk, hash), \"document.head.appendChild(link);\"]), \"}\"]), \"});\"]), \"}\"]);\n      });\n      mainTemplate.hooks.requireExtensions.tap(\"JsonpMainTemplatePlugin\", function (source, chunk) {\n        if (!needChunkOnDemandLoadingCode(chunk)) return source;\n        return Template.asString([source, \"\", \"// on error function for async loading\", \"\".concat(mainTemplate.requireFn, \".oe = function(err) { console.error(err); throw err; };\")]);\n      });\n      mainTemplate.hooks.bootstrap.tap(\"JsonpMainTemplatePlugin\", function (source, chunk, hash) {\n        if (needChunkLoadingCode(chunk)) {\n          var withDefer = needEntryDeferringCode(chunk);\n          var withPrefetch = needPrefetchingCode(chunk);\n          return Template.asString([source, \"\", \"// install a JSONP callback for chunk loading\", \"function webpackJsonpCallback(data) {\", Template.indent([\"var chunkIds = data[0];\", \"var moreModules = data[1];\", withDefer ? \"var executeModules = data[2];\" : \"\", withPrefetch ? \"var prefetchChunks = data[3] || [];\" : \"\", '// add \"moreModules\" to the modules object,', '// then flag all \"chunkIds\" as loaded and fire callback', \"var moduleId, chunkId, i = 0, resolves = [];\", \"for(;i < chunkIds.length; i++) {\", Template.indent([\"chunkId = chunkIds[i];\", \"if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\", Template.indent(\"resolves.push(installedChunks[chunkId][0]);\"), \"}\", \"installedChunks[chunkId] = 0;\"]), \"}\", \"for(moduleId in moreModules) {\", Template.indent([\"if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\", Template.indent(mainTemplate.renderAddModule(hash, chunk, \"moduleId\", \"moreModules[moduleId]\")), \"}\"]), \"}\", \"if(parentJsonpFunction) parentJsonpFunction(data);\", withPrefetch ? withDefer ? \"deferredPrefetch.push.apply(deferredPrefetch, prefetchChunks);\" : Template.asString([\"// chunk prefetching for javascript\", \"prefetchChunks.forEach(function(chunkId) {\", Template.indent([\"if(installedChunks[chunkId] === undefined) {\", Template.indent([\"installedChunks[chunkId] = null;\", mainTemplate.hooks.linkPrefetch.call(\"\", chunk, hash), \"document.head.appendChild(link);\"]), \"}\"]), \"});\"]) : \"\", \"while(resolves.length) {\", Template.indent(\"resolves.shift()();\"), \"}\", withDefer ? Template.asString([\"\", \"// add entry modules from loaded chunk to deferred list\", \"deferredModules.push.apply(deferredModules, executeModules || []);\", \"\", \"// run deferred modules when all chunks ready\", \"return checkDeferredModules();\"]) : \"\"]), \"};\", withDefer ? Template.asString([\"function checkDeferredModules() {\", Template.indent([\"var result;\", \"for(var i = 0; i < deferredModules.length; i++) {\", Template.indent([\"var deferredModule = deferredModules[i];\", \"var fulfilled = true;\", \"for(var j = 1; j < deferredModule.length; j++) {\", Template.indent([\"var depId = deferredModule[j];\", \"if(installedChunks[depId] !== 0) fulfilled = false;\"]), \"}\", \"if(fulfilled) {\", Template.indent([\"deferredModules.splice(i--, 1);\", \"result = \" + mainTemplate.requireFn + \"(\" + mainTemplate.requireFn + \".s = deferredModule[0]);\"]), \"}\"]), \"}\", withPrefetch ? Template.asString([\"if(deferredModules.length === 0) {\", Template.indent([\"// chunk prefetching for javascript\", \"deferredPrefetch.forEach(function(chunkId) {\", Template.indent([\"if(installedChunks[chunkId] === undefined) {\", Template.indent([\"installedChunks[chunkId] = null;\", mainTemplate.hooks.linkPrefetch.call(\"\", chunk, hash), \"document.head.appendChild(link);\"]), \"}\"]), \"});\", \"deferredPrefetch.length = 0;\"]), \"}\"]) : \"\", \"return result;\"]), \"}\"]) : \"\"]);\n        }\n        return source;\n      });\n      mainTemplate.hooks.beforeStartup.tap(\"JsonpMainTemplatePlugin\", function (source, chunk, hash) {\n        if (needChunkLoadingCode(chunk)) {\n          var jsonpFunction = mainTemplate.outputOptions.jsonpFunction;\n          var globalObject = mainTemplate.outputOptions.globalObject;\n          return Template.asString([\"var jsonpArray = \".concat(globalObject, \"[\").concat(JSON.stringify(jsonpFunction), \"] = \").concat(globalObject, \"[\").concat(JSON.stringify(jsonpFunction), \"] || [];\"), \"var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\", \"jsonpArray.push = webpackJsonpCallback;\", \"jsonpArray = jsonpArray.slice();\", \"for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\", \"var parentJsonpFunction = oldJsonpFunction;\", \"\", source]);\n        }\n        return source;\n      });\n      mainTemplate.hooks.afterStartup.tap(\"JsonpMainTemplatePlugin\", function (source, chunk, hash) {\n        var prefetchChunks = chunk.getChildIdsByOrders().prefetch;\n        if (needChunkLoadingCode(chunk) && prefetchChunks && prefetchChunks.length) {\n          return Template.asString([source, \"webpackJsonpCallback([[], {}, 0, \".concat(JSON.stringify(prefetchChunks), \"]);\")]);\n        }\n        return source;\n      });\n      mainTemplate.hooks.startup.tap(\"JsonpMainTemplatePlugin\", function (source, chunk, hash) {\n        if (needEntryDeferringCode(chunk)) {\n          if (chunk.hasEntryModule()) {\n            var entries = [chunk.entryModule].filter(Boolean).map(function (m) {\n              return [m.id].concat(Array.from(chunk.groupsIterable)[0].chunks.filter(function (c) {\n                return c !== chunk;\n              }).map(function (c) {\n                return c.id;\n              }));\n            });\n            return Template.asString([\"// add entry module to deferred list\", \"deferredModules.push(\".concat(entries.map(function (e) {\n              return JSON.stringify(e);\n            }).join(\", \"), \");\"), \"// run deferred modules when ready\", \"return checkDeferredModules();\"]);\n          } else {\n            return Template.asString([\"// run deferred modules from other chunks\", \"checkDeferredModules();\"]);\n          }\n        }\n        return source;\n      });\n      mainTemplate.hooks.hotBootstrap.tap(\"JsonpMainTemplatePlugin\", function (source, chunk, hash) {\n        var globalObject = mainTemplate.outputOptions.globalObject;\n        var hotUpdateChunkFilename = mainTemplate.outputOptions.hotUpdateChunkFilename;\n        var hotUpdateMainFilename = mainTemplate.outputOptions.hotUpdateMainFilename;\n        var crossOriginLoading = mainTemplate.outputOptions.crossOriginLoading;\n        var hotUpdateFunction = mainTemplate.outputOptions.hotUpdateFunction;\n        var currentHotUpdateChunkFilename = mainTemplate.getAssetPath(JSON.stringify(hotUpdateChunkFilename), {\n          hash: \"\\\" + \".concat(mainTemplate.renderCurrentHashCode(hash), \" + \\\"\"),\n          hashWithLength: function hashWithLength(length) {\n            return \"\\\" + \".concat(mainTemplate.renderCurrentHashCode(hash, length), \" + \\\"\");\n          },\n          chunk: {\n            id: '\" + chunkId + \"'\n          }\n        });\n        var currentHotUpdateMainFilename = mainTemplate.getAssetPath(JSON.stringify(hotUpdateMainFilename), {\n          hash: \"\\\" + \".concat(mainTemplate.renderCurrentHashCode(hash), \" + \\\"\"),\n          hashWithLength: function hashWithLength(length) {\n            return \"\\\" + \".concat(mainTemplate.renderCurrentHashCode(hash, length), \" + \\\"\");\n          }\n        });\n        var runtimeSource = Template.getFunctionContent(require(\"./JsonpMainTemplate.runtime\")).replace(/\\/\\/\\$semicolon/g, \";\").replace(/\\$require\\$/g, mainTemplate.requireFn).replace(/\\$crossOriginLoading\\$/g, crossOriginLoading ? JSON.stringify(crossOriginLoading) : \"null\").replace(/\\$hotMainFilename\\$/g, currentHotUpdateMainFilename).replace(/\\$hotChunkFilename\\$/g, currentHotUpdateChunkFilename).replace(/\\$hash\\$/g, JSON.stringify(hash));\n        return \"\".concat(source, \"\\nfunction hotDisposeChunk(chunkId) {\\n\\tdelete installedChunks[chunkId];\\n}\\nvar parentHotUpdateCallback = \").concat(globalObject, \"[\").concat(JSON.stringify(hotUpdateFunction), \"];\\n\").concat(globalObject, \"[\").concat(JSON.stringify(hotUpdateFunction), \"] = \").concat(runtimeSource);\n      });\n      mainTemplate.hooks.hash.tap(\"JsonpMainTemplatePlugin\", function (hash) {\n        hash.update(\"jsonp\");\n        hash.update(\"6\");\n      });\n    }\n  }]);\n  return JsonpMainTemplatePlugin;\n}();\nmodule.exports = JsonpMainTemplatePlugin;","map":{"version":3,"names":["require","SyncWaterfallHook","Template","JsonpMainTemplatePlugin","mainTemplate","needChunkOnDemandLoadingCode","chunk","groupsIterable","chunkGroup","getNumberOfChildren","needChunkLoadingCode","chunks","length","needEntryDeferringCode","needPrefetchingCode","allPrefetchChunks","getChildIdsByOrdersMap","prefetch","Object","keys","forEach","hook","hooks","getScriptSrcPath","hash","chunkIdExpression","chunkFilename","outputOptions","chunkMaps","getChunkMaps","getAssetPath","JSON","stringify","renderCurrentHashCode","hashWithLength","id","shortChunkHashMap","create","chunkId","substr","name","contentHash","javascript","contentHashWithLength","shortContentHashMap","contentHashType","localVars","tap","source","extraCode","push","indent","ids","map","join","requireFn","asString","jsonpScript","_","crossOriginLoading","chunkLoadTimeout","jsonpScriptType","linkPreload","linkPrefetch","requireEnsure","call","stage","chunkMap","preload","requireExtensions","bootstrap","withDefer","withPrefetch","renderAddModule","beforeStartup","jsonpFunction","globalObject","afterStartup","prefetchChunks","getChildIdsByOrders","startup","hasEntryModule","entries","entryModule","filter","Boolean","m","concat","Array","from","c","e","hotBootstrap","hotUpdateChunkFilename","hotUpdateMainFilename","hotUpdateFunction","currentHotUpdateChunkFilename","currentHotUpdateMainFilename","runtimeSource","getFunctionContent","replace","update","module","exports"],"sources":["C:/myCodes/KredoCodeChallenge/react/node_modules/webpack/lib/web/JsonpMainTemplatePlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst { SyncWaterfallHook } = require(\"tapable\");\nconst Template = require(\"../Template\");\n\nclass JsonpMainTemplatePlugin {\n\tapply(mainTemplate) {\n\t\tconst needChunkOnDemandLoadingCode = chunk => {\n\t\t\tfor (const chunkGroup of chunk.groupsIterable) {\n\t\t\t\tif (chunkGroup.getNumberOfChildren() > 0) return true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tconst needChunkLoadingCode = chunk => {\n\t\t\tfor (const chunkGroup of chunk.groupsIterable) {\n\t\t\t\tif (chunkGroup.chunks.length > 1) return true;\n\t\t\t\tif (chunkGroup.getNumberOfChildren() > 0) return true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tconst needEntryDeferringCode = chunk => {\n\t\t\tfor (const chunkGroup of chunk.groupsIterable) {\n\t\t\t\tif (chunkGroup.chunks.length > 1) return true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tconst needPrefetchingCode = chunk => {\n\t\t\tconst allPrefetchChunks = chunk.getChildIdsByOrdersMap(true).prefetch;\n\t\t\treturn allPrefetchChunks && Object.keys(allPrefetchChunks).length;\n\t\t};\n\n\t\t// TODO webpack 5, no adding to .hooks, use WeakMap and static methods\n\t\t[\"jsonpScript\", \"linkPreload\", \"linkPrefetch\"].forEach(hook => {\n\t\t\tif (!mainTemplate.hooks[hook]) {\n\t\t\t\tmainTemplate.hooks[hook] = new SyncWaterfallHook([\n\t\t\t\t\t\"source\",\n\t\t\t\t\t\"chunk\",\n\t\t\t\t\t\"hash\"\n\t\t\t\t]);\n\t\t\t}\n\t\t});\n\n\t\tconst getScriptSrcPath = (hash, chunk, chunkIdExpression) => {\n\t\t\tconst chunkFilename = mainTemplate.outputOptions.chunkFilename;\n\t\t\tconst chunkMaps = chunk.getChunkMaps();\n\t\t\treturn mainTemplate.getAssetPath(JSON.stringify(chunkFilename), {\n\t\t\t\thash: `\" + ${mainTemplate.renderCurrentHashCode(hash)} + \"`,\n\t\t\t\thashWithLength: length =>\n\t\t\t\t\t`\" + ${mainTemplate.renderCurrentHashCode(hash, length)} + \"`,\n\t\t\t\tchunk: {\n\t\t\t\t\tid: `\" + ${chunkIdExpression} + \"`,\n\t\t\t\t\thash: `\" + ${JSON.stringify(\n\t\t\t\t\t\tchunkMaps.hash\n\t\t\t\t\t)}[${chunkIdExpression}] + \"`,\n\t\t\t\t\thashWithLength(length) {\n\t\t\t\t\t\tconst shortChunkHashMap = Object.create(null);\n\t\t\t\t\t\tfor (const chunkId of Object.keys(chunkMaps.hash)) {\n\t\t\t\t\t\t\tif (typeof chunkMaps.hash[chunkId] === \"string\") {\n\t\t\t\t\t\t\t\tshortChunkHashMap[chunkId] = chunkMaps.hash[chunkId].substr(\n\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\tlength\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn `\" + ${JSON.stringify(\n\t\t\t\t\t\t\tshortChunkHashMap\n\t\t\t\t\t\t)}[${chunkIdExpression}] + \"`;\n\t\t\t\t\t},\n\t\t\t\t\tname: `\" + (${JSON.stringify(\n\t\t\t\t\t\tchunkMaps.name\n\t\t\t\t\t)}[${chunkIdExpression}]||${chunkIdExpression}) + \"`,\n\t\t\t\t\tcontentHash: {\n\t\t\t\t\t\tjavascript: `\" + ${JSON.stringify(\n\t\t\t\t\t\t\tchunkMaps.contentHash.javascript\n\t\t\t\t\t\t)}[${chunkIdExpression}] + \"`\n\t\t\t\t\t},\n\t\t\t\t\tcontentHashWithLength: {\n\t\t\t\t\t\tjavascript: length => {\n\t\t\t\t\t\t\tconst shortContentHashMap = {};\n\t\t\t\t\t\t\tconst contentHash = chunkMaps.contentHash.javascript;\n\t\t\t\t\t\t\tfor (const chunkId of Object.keys(contentHash)) {\n\t\t\t\t\t\t\t\tif (typeof contentHash[chunkId] === \"string\") {\n\t\t\t\t\t\t\t\t\tshortContentHashMap[chunkId] = contentHash[chunkId].substr(\n\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\tlength\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn `\" + ${JSON.stringify(\n\t\t\t\t\t\t\t\tshortContentHashMap\n\t\t\t\t\t\t\t)}[${chunkIdExpression}] + \"`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcontentHashType: \"javascript\"\n\t\t\t});\n\t\t};\n\t\tmainTemplate.hooks.localVars.tap(\n\t\t\t\"JsonpMainTemplatePlugin\",\n\t\t\t(source, chunk, hash) => {\n\t\t\t\tconst extraCode = [];\n\t\t\t\tif (needChunkLoadingCode(chunk)) {\n\t\t\t\t\textraCode.push(\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"// object to store loaded and loading chunks\",\n\t\t\t\t\t\t\"// undefined = chunk not loaded, null = chunk preloaded/prefetched\",\n\t\t\t\t\t\t\"// Promise = chunk loading, 0 = chunk loaded\",\n\t\t\t\t\t\t\"var installedChunks = {\",\n\t\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t\tchunk.ids.map(id => `${JSON.stringify(id)}: 0`).join(\",\\n\")\n\t\t\t\t\t\t),\n\t\t\t\t\t\t\"};\",\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\tneedEntryDeferringCode(chunk)\n\t\t\t\t\t\t\t? needPrefetchingCode(chunk)\n\t\t\t\t\t\t\t\t? \"var deferredModules = [], deferredPrefetch = [];\"\n\t\t\t\t\t\t\t\t: \"var deferredModules = [];\"\n\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (needChunkOnDemandLoadingCode(chunk)) {\n\t\t\t\t\textraCode.push(\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"// script path function\",\n\t\t\t\t\t\t\"function jsonpScriptSrc(chunkId) {\",\n\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t`return ${mainTemplate.requireFn}.p + ${getScriptSrcPath(\n\t\t\t\t\t\t\t\thash,\n\t\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\t\t\"chunkId\"\n\t\t\t\t\t\t\t)}`\n\t\t\t\t\t\t]),\n\t\t\t\t\t\t\"}\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (extraCode.length === 0) return source;\n\t\t\t\treturn Template.asString([source, ...extraCode]);\n\t\t\t}\n\t\t);\n\n\t\tmainTemplate.hooks.jsonpScript.tap(\n\t\t\t\"JsonpMainTemplatePlugin\",\n\t\t\t(_, chunk, hash) => {\n\t\t\t\tconst crossOriginLoading =\n\t\t\t\t\tmainTemplate.outputOptions.crossOriginLoading;\n\t\t\t\tconst chunkLoadTimeout = mainTemplate.outputOptions.chunkLoadTimeout;\n\t\t\t\tconst jsonpScriptType = mainTemplate.outputOptions.jsonpScriptType;\n\n\t\t\t\treturn Template.asString([\n\t\t\t\t\t\"var script = document.createElement('script');\",\n\t\t\t\t\t\"var onScriptComplete;\",\n\t\t\t\t\tjsonpScriptType\n\t\t\t\t\t\t? `script.type = ${JSON.stringify(jsonpScriptType)};`\n\t\t\t\t\t\t: \"\",\n\t\t\t\t\t\"script.charset = 'utf-8';\",\n\t\t\t\t\t`script.timeout = ${chunkLoadTimeout / 1000};`,\n\t\t\t\t\t`if (${mainTemplate.requireFn}.nc) {`,\n\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t`script.setAttribute(\"nonce\", ${mainTemplate.requireFn}.nc);`\n\t\t\t\t\t),\n\t\t\t\t\t\"}\",\n\t\t\t\t\t\"script.src = jsonpScriptSrc(chunkId);\",\n\t\t\t\t\tcrossOriginLoading\n\t\t\t\t\t\t? Template.asString([\n\t\t\t\t\t\t\t\t\"if (script.src.indexOf(window.location.origin + '/') !== 0) {\",\n\t\t\t\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t\t\t\t`script.crossOrigin = ${JSON.stringify(crossOriginLoading)};`\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t\t  ])\n\t\t\t\t\t\t: \"\",\n\t\t\t\t\t\"// create error before stack unwound to get useful stacktrace later\",\n\t\t\t\t\t\"var error = new Error();\",\n\t\t\t\t\t\"onScriptComplete = function (event) {\",\n\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\"// avoid mem leaks in IE.\",\n\t\t\t\t\t\t\"script.onerror = script.onload = null;\",\n\t\t\t\t\t\t\"clearTimeout(timeout);\",\n\t\t\t\t\t\t\"var chunk = installedChunks[chunkId];\",\n\t\t\t\t\t\t\"if(chunk !== 0) {\",\n\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\"if(chunk) {\",\n\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\"var errorType = event && (event.type === 'load' ? 'missing' : event.type);\",\n\t\t\t\t\t\t\t\t\"var realSrc = event && event.target && event.target.src;\",\n\t\t\t\t\t\t\t\t\"error.message = 'Loading chunk ' + chunkId + ' failed.\\\\n(' + errorType + ': ' + realSrc + ')';\",\n\t\t\t\t\t\t\t\t\"error.name = 'ChunkLoadError';\",\n\t\t\t\t\t\t\t\t\"error.type = errorType;\",\n\t\t\t\t\t\t\t\t\"error.request = realSrc;\",\n\t\t\t\t\t\t\t\t\"chunk[1](error);\"\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\t\"installedChunks[chunkId] = undefined;\"\n\t\t\t\t\t\t]),\n\t\t\t\t\t\t\"}\"\n\t\t\t\t\t]),\n\t\t\t\t\t\"};\",\n\t\t\t\t\t\"var timeout = setTimeout(function(){\",\n\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\"onScriptComplete({ type: 'timeout', target: script });\"\n\t\t\t\t\t]),\n\t\t\t\t\t`}, ${chunkLoadTimeout});`,\n\t\t\t\t\t\"script.onerror = script.onload = onScriptComplete;\"\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.linkPreload.tap(\n\t\t\t\"JsonpMainTemplatePlugin\",\n\t\t\t(_, chunk, hash) => {\n\t\t\t\tconst crossOriginLoading =\n\t\t\t\t\tmainTemplate.outputOptions.crossOriginLoading;\n\t\t\t\tconst jsonpScriptType = mainTemplate.outputOptions.jsonpScriptType;\n\n\t\t\t\treturn Template.asString([\n\t\t\t\t\t\"var link = document.createElement('link');\",\n\t\t\t\t\tjsonpScriptType\n\t\t\t\t\t\t? `link.type = ${JSON.stringify(jsonpScriptType)};`\n\t\t\t\t\t\t: \"\",\n\t\t\t\t\t\"link.charset = 'utf-8';\",\n\t\t\t\t\t`if (${mainTemplate.requireFn}.nc) {`,\n\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t`link.setAttribute(\"nonce\", ${mainTemplate.requireFn}.nc);`\n\t\t\t\t\t),\n\t\t\t\t\t\"}\",\n\t\t\t\t\t'link.rel = \"preload\";',\n\t\t\t\t\t'link.as = \"script\";',\n\t\t\t\t\t\"link.href = jsonpScriptSrc(chunkId);\",\n\t\t\t\t\tcrossOriginLoading\n\t\t\t\t\t\t? Template.asString([\n\t\t\t\t\t\t\t\t\"if (link.href.indexOf(window.location.origin + '/') !== 0) {\",\n\t\t\t\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t\t\t\t`link.crossOrigin = ${JSON.stringify(crossOriginLoading)};`\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t\t  ])\n\t\t\t\t\t\t: \"\"\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.linkPrefetch.tap(\n\t\t\t\"JsonpMainTemplatePlugin\",\n\t\t\t(_, chunk, hash) => {\n\t\t\t\tconst crossOriginLoading =\n\t\t\t\t\tmainTemplate.outputOptions.crossOriginLoading;\n\n\t\t\t\treturn Template.asString([\n\t\t\t\t\t\"var link = document.createElement('link');\",\n\t\t\t\t\tcrossOriginLoading\n\t\t\t\t\t\t? `link.crossOrigin = ${JSON.stringify(crossOriginLoading)};`\n\t\t\t\t\t\t: \"\",\n\t\t\t\t\t`if (${mainTemplate.requireFn}.nc) {`,\n\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t`link.setAttribute(\"nonce\", ${mainTemplate.requireFn}.nc);`\n\t\t\t\t\t),\n\t\t\t\t\t\"}\",\n\t\t\t\t\t'link.rel = \"prefetch\";',\n\t\t\t\t\t'link.as = \"script\";',\n\t\t\t\t\t\"link.href = jsonpScriptSrc(chunkId);\"\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.requireEnsure.tap(\n\t\t\t\"JsonpMainTemplatePlugin load\",\n\t\t\t(source, chunk, hash) => {\n\t\t\t\treturn Template.asString([\n\t\t\t\t\tsource,\n\t\t\t\t\t\"\",\n\t\t\t\t\t\"// JSONP chunk loading for javascript\",\n\t\t\t\t\t\"\",\n\t\t\t\t\t\"var installedChunkData = installedChunks[chunkId];\",\n\t\t\t\t\t'if(installedChunkData !== 0) { // 0 means \"already installed\".',\n\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t'// a Promise means \"currently loading\".',\n\t\t\t\t\t\t\"if(installedChunkData) {\",\n\t\t\t\t\t\tTemplate.indent([\"promises.push(installedChunkData[2]);\"]),\n\t\t\t\t\t\t\"} else {\",\n\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\"// setup Promise in chunk cache\",\n\t\t\t\t\t\t\t\"var promise = new Promise(function(resolve, reject) {\",\n\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\"installedChunkData = installedChunks[chunkId] = [resolve, reject];\"\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\"});\",\n\t\t\t\t\t\t\t\"promises.push(installedChunkData[2] = promise);\",\n\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\t\"// start chunk loading\",\n\t\t\t\t\t\t\tmainTemplate.hooks.jsonpScript.call(\"\", chunk, hash),\n\t\t\t\t\t\t\t\"document.head.appendChild(script);\"\n\t\t\t\t\t\t]),\n\t\t\t\t\t\t\"}\"\n\t\t\t\t\t]),\n\t\t\t\t\t\"}\"\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.requireEnsure.tap(\n\t\t\t{\n\t\t\t\tname: \"JsonpMainTemplatePlugin preload\",\n\t\t\t\tstage: 10\n\t\t\t},\n\t\t\t(source, chunk, hash) => {\n\t\t\t\tconst chunkMap = chunk.getChildIdsByOrdersMap().preload;\n\t\t\t\tif (!chunkMap || Object.keys(chunkMap).length === 0) return source;\n\t\t\t\treturn Template.asString([\n\t\t\t\t\tsource,\n\t\t\t\t\t\"\",\n\t\t\t\t\t\"// chunk preloadng for javascript\",\n\t\t\t\t\t\"\",\n\t\t\t\t\t`var chunkPreloadMap = ${JSON.stringify(chunkMap, null, \"\\t\")};`,\n\t\t\t\t\t\"\",\n\t\t\t\t\t\"var chunkPreloadData = chunkPreloadMap[chunkId];\",\n\t\t\t\t\t\"if(chunkPreloadData) {\",\n\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\"chunkPreloadData.forEach(function(chunkId) {\",\n\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\"if(installedChunks[chunkId] === undefined) {\",\n\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\"installedChunks[chunkId] = null;\",\n\t\t\t\t\t\t\t\tmainTemplate.hooks.linkPreload.call(\"\", chunk, hash),\n\t\t\t\t\t\t\t\t\"document.head.appendChild(link);\"\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t\t]),\n\t\t\t\t\t\t\"});\"\n\t\t\t\t\t]),\n\t\t\t\t\t\"}\"\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.requireExtensions.tap(\n\t\t\t\"JsonpMainTemplatePlugin\",\n\t\t\t(source, chunk) => {\n\t\t\t\tif (!needChunkOnDemandLoadingCode(chunk)) return source;\n\n\t\t\t\treturn Template.asString([\n\t\t\t\t\tsource,\n\t\t\t\t\t\"\",\n\t\t\t\t\t\"// on error function for async loading\",\n\t\t\t\t\t`${mainTemplate.requireFn}.oe = function(err) { console.error(err); throw err; };`\n\t\t\t\t]);\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.bootstrap.tap(\n\t\t\t\"JsonpMainTemplatePlugin\",\n\t\t\t(source, chunk, hash) => {\n\t\t\t\tif (needChunkLoadingCode(chunk)) {\n\t\t\t\t\tconst withDefer = needEntryDeferringCode(chunk);\n\t\t\t\t\tconst withPrefetch = needPrefetchingCode(chunk);\n\t\t\t\t\treturn Template.asString([\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"// install a JSONP callback for chunk loading\",\n\t\t\t\t\t\t\"function webpackJsonpCallback(data) {\",\n\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\"var chunkIds = data[0];\",\n\t\t\t\t\t\t\t\"var moreModules = data[1];\",\n\t\t\t\t\t\t\twithDefer ? \"var executeModules = data[2];\" : \"\",\n\t\t\t\t\t\t\twithPrefetch ? \"var prefetchChunks = data[3] || [];\" : \"\",\n\t\t\t\t\t\t\t'// add \"moreModules\" to the modules object,',\n\t\t\t\t\t\t\t'// then flag all \"chunkIds\" as loaded and fire callback',\n\t\t\t\t\t\t\t\"var moduleId, chunkId, i = 0, resolves = [];\",\n\t\t\t\t\t\t\t\"for(;i < chunkIds.length; i++) {\",\n\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\"chunkId = chunkIds[i];\",\n\t\t\t\t\t\t\t\t\"if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\",\n\t\t\t\t\t\t\t\tTemplate.indent(\"resolves.push(installedChunks[chunkId][0]);\"),\n\t\t\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\t\t\"installedChunks[chunkId] = 0;\"\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\t\"for(moduleId in moreModules) {\",\n\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\"if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\",\n\t\t\t\t\t\t\t\tTemplate.indent(\n\t\t\t\t\t\t\t\t\tmainTemplate.renderAddModule(\n\t\t\t\t\t\t\t\t\t\thash,\n\t\t\t\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\t\t\t\t\"moduleId\",\n\t\t\t\t\t\t\t\t\t\t\"moreModules[moduleId]\"\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\t\"if(parentJsonpFunction) parentJsonpFunction(data);\",\n\t\t\t\t\t\t\twithPrefetch\n\t\t\t\t\t\t\t\t? withDefer\n\t\t\t\t\t\t\t\t\t? \"deferredPrefetch.push.apply(deferredPrefetch, prefetchChunks);\"\n\t\t\t\t\t\t\t\t\t: Template.asString([\n\t\t\t\t\t\t\t\t\t\t\t\"// chunk prefetching for javascript\",\n\t\t\t\t\t\t\t\t\t\t\t\"prefetchChunks.forEach(function(chunkId) {\",\n\t\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\t\t\"if(installedChunks[chunkId] === undefined) {\",\n\t\t\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"installedChunks[chunkId] = null;\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tmainTemplate.hooks.linkPrefetch.call(\"\", chunk, hash),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"document.head.appendChild(link);\"\n\t\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\t\"});\"\n\t\t\t\t\t\t\t\t\t  ])\n\t\t\t\t\t\t\t\t: \"\",\n\t\t\t\t\t\t\t\"while(resolves.length) {\",\n\t\t\t\t\t\t\tTemplate.indent(\"resolves.shift()();\"),\n\t\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\twithDefer\n\t\t\t\t\t\t\t\t? Template.asString([\n\t\t\t\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\t\t\t\t\"// add entry modules from loaded chunk to deferred list\",\n\t\t\t\t\t\t\t\t\t\t\"deferredModules.push.apply(deferredModules, executeModules || []);\",\n\t\t\t\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\t\t\t\t\"// run deferred modules when all chunks ready\",\n\t\t\t\t\t\t\t\t\t\t\"return checkDeferredModules();\"\n\t\t\t\t\t\t\t\t  ])\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t]),\n\t\t\t\t\t\t\"};\",\n\t\t\t\t\t\twithDefer\n\t\t\t\t\t\t\t? Template.asString([\n\t\t\t\t\t\t\t\t\t\"function checkDeferredModules() {\",\n\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\"var result;\",\n\t\t\t\t\t\t\t\t\t\t\"for(var i = 0; i < deferredModules.length; i++) {\",\n\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\t\"var deferredModule = deferredModules[i];\",\n\t\t\t\t\t\t\t\t\t\t\t\"var fulfilled = true;\",\n\t\t\t\t\t\t\t\t\t\t\t\"for(var j = 1; j < deferredModule.length; j++) {\",\n\t\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\t\t\"var depId = deferredModule[j];\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"if(installedChunks[depId] !== 0) fulfilled = false;\"\n\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\t\t\t\t\t\"if(fulfilled) {\",\n\t\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\t\t\"deferredModules.splice(i--, 1);\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"result = \" +\n\t\t\t\t\t\t\t\t\t\t\t\t\tmainTemplate.requireFn +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"(\" +\n\t\t\t\t\t\t\t\t\t\t\t\t\tmainTemplate.requireFn +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\".s = deferredModule[0]);\"\n\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\"}\",\n\t\t\t\t\t\t\t\t\t\twithPrefetch\n\t\t\t\t\t\t\t\t\t\t\t? Template.asString([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"if(deferredModules.length === 0) {\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"// chunk prefetching for javascript\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"deferredPrefetch.forEach(function(chunkId) {\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"if(installedChunks[chunkId] === undefined) {\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"installedChunks[chunkId] = null;\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmainTemplate.hooks.linkPrefetch.call(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchunk,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thash\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"document.head.appendChild(link);\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"});\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"deferredPrefetch.length = 0;\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t\t\t\t\t\t\t  ])\n\t\t\t\t\t\t\t\t\t\t\t: \"\",\n\t\t\t\t\t\t\t\t\t\t\"return result;\"\n\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\"}\"\n\t\t\t\t\t\t\t  ])\n\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t\treturn source;\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.beforeStartup.tap(\n\t\t\t\"JsonpMainTemplatePlugin\",\n\t\t\t(source, chunk, hash) => {\n\t\t\t\tif (needChunkLoadingCode(chunk)) {\n\t\t\t\t\tvar jsonpFunction = mainTemplate.outputOptions.jsonpFunction;\n\t\t\t\t\tvar globalObject = mainTemplate.outputOptions.globalObject;\n\t\t\t\t\treturn Template.asString([\n\t\t\t\t\t\t`var jsonpArray = ${globalObject}[${JSON.stringify(\n\t\t\t\t\t\t\tjsonpFunction\n\t\t\t\t\t\t)}] = ${globalObject}[${JSON.stringify(jsonpFunction)}] || [];`,\n\t\t\t\t\t\t\"var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\",\n\t\t\t\t\t\t\"jsonpArray.push = webpackJsonpCallback;\",\n\t\t\t\t\t\t\"jsonpArray = jsonpArray.slice();\",\n\t\t\t\t\t\t\"for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\",\n\t\t\t\t\t\t\"var parentJsonpFunction = oldJsonpFunction;\",\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\tsource\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t\treturn source;\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.afterStartup.tap(\n\t\t\t\"JsonpMainTemplatePlugin\",\n\t\t\t(source, chunk, hash) => {\n\t\t\t\tconst prefetchChunks = chunk.getChildIdsByOrders().prefetch;\n\t\t\t\tif (\n\t\t\t\t\tneedChunkLoadingCode(chunk) &&\n\t\t\t\t\tprefetchChunks &&\n\t\t\t\t\tprefetchChunks.length\n\t\t\t\t) {\n\t\t\t\t\treturn Template.asString([\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\t`webpackJsonpCallback([[], {}, 0, ${JSON.stringify(\n\t\t\t\t\t\t\tprefetchChunks\n\t\t\t\t\t\t)}]);`\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t\treturn source;\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.startup.tap(\n\t\t\t\"JsonpMainTemplatePlugin\",\n\t\t\t(source, chunk, hash) => {\n\t\t\t\tif (needEntryDeferringCode(chunk)) {\n\t\t\t\t\tif (chunk.hasEntryModule()) {\n\t\t\t\t\t\tconst entries = [chunk.entryModule].filter(Boolean).map(m =>\n\t\t\t\t\t\t\t[m.id].concat(\n\t\t\t\t\t\t\t\tArray.from(chunk.groupsIterable)[0]\n\t\t\t\t\t\t\t\t\t.chunks.filter(c => c !== chunk)\n\t\t\t\t\t\t\t\t\t.map(c => c.id)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn Template.asString([\n\t\t\t\t\t\t\t\"// add entry module to deferred list\",\n\t\t\t\t\t\t\t`deferredModules.push(${entries\n\t\t\t\t\t\t\t\t.map(e => JSON.stringify(e))\n\t\t\t\t\t\t\t\t.join(\", \")});`,\n\t\t\t\t\t\t\t\"// run deferred modules when ready\",\n\t\t\t\t\t\t\t\"return checkDeferredModules();\"\n\t\t\t\t\t\t]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn Template.asString([\n\t\t\t\t\t\t\t\"// run deferred modules from other chunks\",\n\t\t\t\t\t\t\t\"checkDeferredModules();\"\n\t\t\t\t\t\t]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn source;\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.hotBootstrap.tap(\n\t\t\t\"JsonpMainTemplatePlugin\",\n\t\t\t(source, chunk, hash) => {\n\t\t\t\tconst globalObject = mainTemplate.outputOptions.globalObject;\n\t\t\t\tconst hotUpdateChunkFilename =\n\t\t\t\t\tmainTemplate.outputOptions.hotUpdateChunkFilename;\n\t\t\t\tconst hotUpdateMainFilename =\n\t\t\t\t\tmainTemplate.outputOptions.hotUpdateMainFilename;\n\t\t\t\tconst crossOriginLoading =\n\t\t\t\t\tmainTemplate.outputOptions.crossOriginLoading;\n\t\t\t\tconst hotUpdateFunction = mainTemplate.outputOptions.hotUpdateFunction;\n\t\t\t\tconst currentHotUpdateChunkFilename = mainTemplate.getAssetPath(\n\t\t\t\t\tJSON.stringify(hotUpdateChunkFilename),\n\t\t\t\t\t{\n\t\t\t\t\t\thash: `\" + ${mainTemplate.renderCurrentHashCode(hash)} + \"`,\n\t\t\t\t\t\thashWithLength: length =>\n\t\t\t\t\t\t\t`\" + ${mainTemplate.renderCurrentHashCode(hash, length)} + \"`,\n\t\t\t\t\t\tchunk: {\n\t\t\t\t\t\t\tid: '\" + chunkId + \"'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tconst currentHotUpdateMainFilename = mainTemplate.getAssetPath(\n\t\t\t\t\tJSON.stringify(hotUpdateMainFilename),\n\t\t\t\t\t{\n\t\t\t\t\t\thash: `\" + ${mainTemplate.renderCurrentHashCode(hash)} + \"`,\n\t\t\t\t\t\thashWithLength: length =>\n\t\t\t\t\t\t\t`\" + ${mainTemplate.renderCurrentHashCode(hash, length)} + \"`\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tconst runtimeSource = Template.getFunctionContent(\n\t\t\t\t\trequire(\"./JsonpMainTemplate.runtime\")\n\t\t\t\t)\n\t\t\t\t\t.replace(/\\/\\/\\$semicolon/g, \";\")\n\t\t\t\t\t.replace(/\\$require\\$/g, mainTemplate.requireFn)\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t/\\$crossOriginLoading\\$/g,\n\t\t\t\t\t\tcrossOriginLoading ? JSON.stringify(crossOriginLoading) : \"null\"\n\t\t\t\t\t)\n\t\t\t\t\t.replace(/\\$hotMainFilename\\$/g, currentHotUpdateMainFilename)\n\t\t\t\t\t.replace(/\\$hotChunkFilename\\$/g, currentHotUpdateChunkFilename)\n\t\t\t\t\t.replace(/\\$hash\\$/g, JSON.stringify(hash));\n\t\t\t\treturn `${source}\nfunction hotDisposeChunk(chunkId) {\n\tdelete installedChunks[chunkId];\n}\nvar parentHotUpdateCallback = ${globalObject}[${JSON.stringify(\n\t\t\t\t\thotUpdateFunction\n\t\t\t\t)}];\n${globalObject}[${JSON.stringify(hotUpdateFunction)}] = ${runtimeSource}`;\n\t\t\t}\n\t\t);\n\t\tmainTemplate.hooks.hash.tap(\"JsonpMainTemplatePlugin\", hash => {\n\t\t\thash.update(\"jsonp\");\n\t\t\thash.update(\"6\");\n\t\t});\n\t}\n}\nmodule.exports = JsonpMainTemplatePlugin;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}