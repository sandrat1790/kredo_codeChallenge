{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar _classCallCheck = require(\"C:/myCodes/KredoCodeChallenge/react/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar _createClass = require(\"C:/myCodes/KredoCodeChallenge/react/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar Template = require(\"../Template\");\nvar WasmMainTemplatePlugin = require(\"../wasm/WasmMainTemplatePlugin\");\nvar ReadFileCompileWasmTemplatePlugin = /*#__PURE__*/function () {\n  function ReadFileCompileWasmTemplatePlugin(options) {\n    _classCallCheck(this, ReadFileCompileWasmTemplatePlugin);\n    this.options = options || {};\n  }\n  _createClass(ReadFileCompileWasmTemplatePlugin, [{\n    key: \"apply\",\n    value: function apply(compiler) {\n      var _this = this;\n      compiler.hooks.thisCompilation.tap(\"ReadFileCompileWasmTemplatePlugin\", function (compilation) {\n        var generateLoadBinaryCode = function generateLoadBinaryCode(path) {\n          return Template.asString([\"new Promise(function (resolve, reject) {\", Template.indent([\"var { readFile } = require('fs');\", \"var { join } = require('path');\", \"\", \"try {\", Template.indent([\"readFile(join(__dirname, \".concat(path, \"), function(err, buffer){\"), Template.indent([\"if (err) return reject(err);\", \"\", \"// Fake fetch response\", \"resolve({\", Template.indent([\"arrayBuffer() { return Promise.resolve(buffer); }\"]), \"});\"]), \"});\"]), \"} catch (err) { reject(err); }\"]), \"})\"]);\n        };\n        var plugin = new WasmMainTemplatePlugin(Object.assign({\n          generateLoadBinaryCode: generateLoadBinaryCode,\n          supportsStreaming: false\n        }, _this.options));\n        plugin.apply(compilation.mainTemplate);\n      });\n    }\n  }]);\n  return ReadFileCompileWasmTemplatePlugin;\n}();\nmodule.exports = ReadFileCompileWasmTemplatePlugin;","map":{"version":3,"names":["Template","require","WasmMainTemplatePlugin","ReadFileCompileWasmTemplatePlugin","options","compiler","hooks","thisCompilation","tap","compilation","generateLoadBinaryCode","path","asString","indent","plugin","Object","assign","supportsStreaming","apply","mainTemplate","module","exports"],"sources":["C:/myCodes/KredoCodeChallenge/react/node_modules/webpack/lib/node/ReadFileCompileWasmTemplatePlugin.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Template = require(\"../Template\");\nconst WasmMainTemplatePlugin = require(\"../wasm/WasmMainTemplatePlugin\");\n\nclass ReadFileCompileWasmTemplatePlugin {\n\tconstructor(options) {\n\t\tthis.options = options || {};\n\t}\n\n\tapply(compiler) {\n\t\tcompiler.hooks.thisCompilation.tap(\n\t\t\t\"ReadFileCompileWasmTemplatePlugin\",\n\t\t\tcompilation => {\n\t\t\t\tconst generateLoadBinaryCode = path =>\n\t\t\t\t\tTemplate.asString([\n\t\t\t\t\t\t\"new Promise(function (resolve, reject) {\",\n\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\"var { readFile } = require('fs');\",\n\t\t\t\t\t\t\t\"var { join } = require('path');\",\n\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\t\"try {\",\n\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t`readFile(join(__dirname, ${path}), function(err, buffer){`,\n\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\"if (err) return reject(err);\",\n\t\t\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\t\t\t\"// Fake fetch response\",\n\t\t\t\t\t\t\t\t\t\"resolve({\",\n\t\t\t\t\t\t\t\t\tTemplate.indent([\n\t\t\t\t\t\t\t\t\t\t\"arrayBuffer() { return Promise.resolve(buffer); }\"\n\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\t\"});\"\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\"});\"\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\"} catch (err) { reject(err); }\"\n\t\t\t\t\t\t]),\n\t\t\t\t\t\t\"})\"\n\t\t\t\t\t]);\n\n\t\t\t\tconst plugin = new WasmMainTemplatePlugin(\n\t\t\t\t\tObject.assign(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgenerateLoadBinaryCode,\n\t\t\t\t\t\t\tsupportsStreaming: false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tthis.options\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tplugin.apply(compilation.mainTemplate);\n\t\t\t}\n\t\t);\n\t}\n}\n\nmodule.exports = ReadFileCompileWasmTemplatePlugin;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,YAAY;;AAAC;AAAA;AAEb,IAAMA,QAAQ,GAAGC,OAAO,CAAC,aAAa,CAAC;AACvC,IAAMC,sBAAsB,GAAGD,OAAO,CAAC,gCAAgC,CAAC;AAAC,IAEnEE,iCAAiC;EACtC,2CAAYC,OAAO,EAAE;IAAA;IACpB,IAAI,CAACA,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;EAC7B;EAAC;IAAA;IAAA,OAED,eAAMC,QAAQ,EAAE;MAAA;MACfA,QAAQ,CAACC,KAAK,CAACC,eAAe,CAACC,GAAG,CACjC,mCAAmC,EACnC,UAAAC,WAAW,EAAI;QACd,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAsB,CAAGC,IAAI;UAAA,OAClCX,QAAQ,CAACY,QAAQ,CAAC,CACjB,0CAA0C,EAC1CZ,QAAQ,CAACa,MAAM,CAAC,CACf,mCAAmC,EACnC,iCAAiC,EACjC,EAAE,EACF,OAAO,EACPb,QAAQ,CAACa,MAAM,CAAC,oCACaF,IAAI,gCAChCX,QAAQ,CAACa,MAAM,CAAC,CACf,8BAA8B,EAC9B,EAAE,EACF,wBAAwB,EACxB,WAAW,EACXb,QAAQ,CAACa,MAAM,CAAC,CACf,mDAAmD,CACnD,CAAC,EACF,KAAK,CACL,CAAC,EACF,KAAK,CACL,CAAC,EACF,gCAAgC,CAChC,CAAC,EACF,IAAI,CACJ,CAAC;QAAA;QAEH,IAAMC,MAAM,GAAG,IAAIZ,sBAAsB,CACxCa,MAAM,CAACC,MAAM,CACZ;UACCN,sBAAsB,EAAtBA,sBAAsB;UACtBO,iBAAiB,EAAE;QACpB,CAAC,EACD,KAAI,CAACb,OAAO,CACZ,CACD;QACDU,MAAM,CAACI,KAAK,CAACT,WAAW,CAACU,YAAY,CAAC;MACvC,CAAC,CACD;IACF;EAAC;EAAA;AAAA;AAGFC,MAAM,CAACC,OAAO,GAAGlB,iCAAiC"},"metadata":{},"sourceType":"script"}